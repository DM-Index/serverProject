"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function retY(t){var e=t.scrollTop()/t.height();return.85>e?e:.85}var app=angular.module("app",["ui.router"]).config(["$stateProvider","$urlRouterProvider","$compileProvider",function(t,e,r){r.debugInfoEnabled(!1),e.otherwise("/"),t.state("home",{url:"/",templateUrl:"./views/homeTmpl.html",controller:"homeCtrl"}).state("store",{url:"/store",templateUrl:"./views/storeTmpl.html",controller:"storeCtrl"}).state("product",{url:"/product/:id",templateUrl:"./views/productTmpl.html",controller:"productCtrl"}).state("shows",{url:"/shows",templateUrl:"./views/showsTmpl.html",controller:"showsCtrl"}).state("about",{url:"/about",templateUrl:"./views/aboutTmpl.html",controller:"aboutCtrl"}).state("media",{url:"/media",templateUrl:"./views/mediaTmpl.html",controller:"mediaCtrl"}).state("admin",{url:"/admin/:adminId/:pass",controller:"adminCtrl",templateUrl:"./views/adminTmpl.html",resolve:{admin:["$stateParams","adminService","$state",function(t,e,r){return t.adminId&&t.pass?e.checkPass(t.adminId,t.pass).then(function(t){return"false"!==t.data}):(r.go("/"),void 0)}]}}).state("cart",{url:"/cart",controller:"cartCtrl",templateUrl:"./views/cartTmpl.html"})}]).directive("navBar",function(){return{templateUrl:"./views/navbar.html",scope:{user:"="},controller:["$http","$scope",function(t,e){t.get("/api/cart").then(function(t){e.user=t.data.pop()})}]}});!function(t,e,r,n,o,i,a){t.GoogleAnalyticsObject=o,t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].l=1*new Date,i=e.createElement(r),a=e.getElementsByTagName(r)[0],i.async=1,i.src=n,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-93904885-1","auto"),ga("send","pageview"),angular.module("app").controller("aboutCtrl",["$scope",function(){angular.element(document).ready(function(){function t(t){var e=t.getBoundingClientRect(),r=e.top,n=e.left,o=e.bottom,i=e.right;return r>=0&&n>=0&&o<=(window.innerHeight||document.documentElement.clientHeight)&&i<=(window.innerWidth||document.documentElement.clientWidth)}function e(){r.forEach(function(e){t(e)?e.classList.add("in-view"):e.classList.remove("in-view")})}$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height();return.85>t?t:.85}var e=$(window).scrollTop();$(".about-page-container").css("background-size",70+parseInt(e/6)+"vh"),$(".about-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")});var r=document.querySelectorAll(".timeline li");window.addEventListener("load",e),window.addEventListener("resize",e),window.addEventListener("scroll",e)})}]),app.controller("adminCtrl",["$scope","adminService","admin",function(t,e,r){t.userIsAdmin=r,angular.element(document).ready(function(){$(document).ready(function(){$(".collapsible").collapsible({accordion:!1})})}),t.submitNewProduct=function(){var r;t.title&&t.price?null:alert("Please ensure the title and price fields are complete");var n=(r=t,title=r.title,description=r.description,price=r.price,category=r.category,color=r.color,imgUrl=r.imgUrl,url=r.url,size=r.size,r);e.submitNewProduct(n).then(function(){t.title="",t.description="",t.price="",t.category="",t.color="",t.imgUrl="",t.url="",t.size=""})},t.editProduct=function(){var r=t.objId,n=t.title,o=t.description,i=t.price,a=t.category,c=t.color,l=t.imgUrl,u=t.url,s=t.size,d={objId:r};n?d.title=n:null,o?d.description=o:null,i?d.price=i:null,a?d.category=a:null,c?d.color=c:null,l?d.imgUrl=l:null,u?d.url=u:null,s?d.size=s:null,e.editProduct(d).then(function(e){200==e.status&&(t.title="",t.description="",t.price="",t.category="",t.color="",t.imgUrl="",t.url="",t.size="",t.objId="")})},t.deleteProduct=function(r){e.deleteProduct(r).then(function(e){200==e.status&&(t.objId="")})},t.addBlogPost=function(r,n,o){var i={title:n,body:r,imgUrl:o};e.addBlogPost(i).then(function(e){200==e.status&&(t.body="",t.title="",t.imgUrl="")})},t.editBlogPost=function(r,n,o){blogObj={title:o,body:n,objId:r},e.editBlogPost(blogObj).then(function(e){200==e.status&&(t.body="",t.title="",t.objId="")})},t.deleteBlog=function(r){e.deleteBlog(r).then(function(){return t.objId=""})}}]),app.service("adminService",["$http",function(t){this.submitNewProduct=function(e){return t.post("/api/products",e)},this.editProduct=function(e){return t.put("/api/products/"+e.objId,e)},this.deleteProduct=function(e){return t.delete("/api/products/"+e)},this.addBlogPost=function(e){return t.post("/api/blogs",e)},this.editBlogPost=function(e){return t.put("/api/blogs/"+e.objId,e)},this.deleteBlog=function(e){return t.delete("/api/blogs/"+e)},this.checkPass=function(e,r){return t.get("/api/admin/?user="+e+"&pass="+r)}}]),app.controller("cartCtrl",["$scope","cartService","storeService","$state",function(t,e,r,n){function o(){return t.cart.reduce(function(t,e){return t+e.total},0)}function i(){e.getCart().then(function(e){e.data.forEach(function(e){t.user=e,a(t.user._id)})})}angular.element(document).ready(function(){$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height();return.85>t?t:.85}var e=$(window).scrollTop();$(".Store-page-container").css("background-size",125+parseInt(e/3)+"vh"),$(".Store-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")}),$(".modal-trigger").leanModal()}),t.reviewProduct=function(t){var e=r.products.find(function(e){var r=e._id;return r==t._id});n.go("product",{id:e.title})};var a=function(r){e.fillCart(r).then(function(e){t.cart=e.data.cart.map(function(t){return{product:t.product,quantity:t.quantity,total:t.quantity*t.product.price}}),t.total=o()})};t.increaseQuantity=function(e){t.cart.forEach(function(t){t.product._id===e&&(t.quantity+=1,t.total=t.quantity*t.product.price)}),t.total=o()},t.decreaseQuantity=function(e){t.cart.forEach(function(t){t.product._id===e&&t.quantity>1&&(t.quantity-=1,t.total=t.quantity*t.product.price)}),t.total=o()},t.removeFromCart=function(r){e.removeFromCart(r,t.user._id).then(function(){i()})},t.submitOrder=function(){var r=void 0;if(t.foreignAddress){if(!t.nonUsAddress)return alert("Please ensure all fields are complete. We can not complete your order without this information.\nIf you are having trouble completing an order, Please contact us at DogCompanyDtx@gmail.com"),void 0;r={first_name:t.first_name,last_name:t.last_name,email:t.email,nonUSAddress:t.nonUsAddress}}else{if(!(t.first_name&&t.last_name&&t.email&&t.street&&t.city&&t.state&&t.zipcode))return alert("Please ensure all fields are complete. We can not complete your order without this information.\n\nIf you are having trouble completing an order, Please contact us at DogCompanyDtx@gmail.com"),void 0;r={first_name:t.first_name,last_name:t.last_name,email:t.email,street:t.street,city:t.city,state:t.state,zipcode:t.zipcode}}var o={cart:t.cart,total:t.total,user:r};e.submitOrder(o).then(function(t){window.currentUserOrderInformation=t.data,e.deleteUser().then(function(){n.go("store")})})},i()}]),app.service("cartService",["$http",function(t){this.fillCart=function(e){return t.get("/api/cart/"+e)},this.getCart=function(){return t.get("/api/cart")},this.removeFromCart=function(e,r){return t.put("/api/cart/deleteItem/"+r,{_id:e})},this.submitOrder=function(e){return t.post("/api/order",e)},this.deleteUser=function(){return t.delete("/api/User")}}]),app.controller("homeCtrl",["$scope","homeService",function(t,e){angular.element(document).ready(function(){$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height();return.85>t?t:.85}var e=$(window).scrollTop();$(".Home-page-container").css("background-size",125+parseInt(e/6)+"vh"),$(".home-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")})}),e.getBlogs().then(function(e){return t.blogs=e})}]),app.service("homeService",["$http",function(t){this.getBlogs=function(){return t.get("/api/blogs").then(function(t){return t.data.sort(function(t,e){return t.date<e.date})})}}]),angular.module("app").controller("mediaCtrl",["$scope",function(){angular.element(document).ready(function(){$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height();return.85>t?t:.85}var e=$(window).scrollTop();$(".media-page-container").css("background-size",80+parseInt(e/6)+"vw"),$(".media-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")})})}]),app.controller("showsCtrl",["$scope","$window","showsService",function(t,e,r){angular.element(document).ready(function(){$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height()*1.25;return.85>t?t:.85}var e=$(window).scrollTop();$(".shows-page-container").css("background-size",125+parseInt(e/6)+"vh"),$(".shows-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")})}),r.getShows().then(function(e){return t.shows=e.data.slice(1,49).reverse()}),t.goToThere=function(t){return e.location.href=t}}]),app.service("showsService",["$http",function(t){this.getShows=function(){return t.get("/api/shows")}}]),app.controller("productCtrl",["$scope","$state","storeService",function(t,e,r){angular.element(document).ready(function(){$(".carousel").carousel(),$("select").material_select();$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height();return.85>t?t:.85}var e=$(window).scrollTop();$(".Store-page-container").css("background-size",125+parseInt(e/3)+"vh"),$(".Store-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")})}),t.sizes={small:!1,medium:!1,large:!1,xLarge:!1,xxLarge:!1,xxxLarge:!1},r.getAllProducts().then(function(r){r.data.forEach(function(r){var n=r.title,o=r.available,i=r._id,a=r.color,c=r.description,l=r.imgUrl,u=r.price,s=r.options,d=r.imgUrl2,p=r.imgUrl3,m=r.size,f=r.category;if(n===e.params.id){for(var g in t.sizes){g===m&&(t.sizes[g]=o)}t.product={_id:i,category:f,color:a,description:c,imgUrl:l,price:u,title:n,options:s},d&&(t.product.imgUrl2=d,t.img2Toggle=!0),p&&(t.product.imgUrl3=p),"merch"!==f&&(t.product.size=m),"merch"==f&&(t.toggle=!0)}})}),t.addToCart=function(n,o,i){r.addToCart(n,o||"small",i).then(function(r){t.user=r.data,e.go("store")})}}]),app.controller("storeCtrl",["$scope","$state","storeService",function(t,e,r){t.nonUSAddress=!1,angular.element(document).ready(function(){var t=$(window);t.on("scroll",function(){var e=t.scrollTop();$(".Store-page-container").css("background-size",125+parseInt(e/6)+"vh"),$(".Store-page-content-container").css("background-color","rgba(0,0,0, "+retY(t)+")")})}),r.getAllProducts().then(function(e){var r=e.data.reduce(function(t,e){return t.includes(e.title)?t:[].concat(_toConsumableArray(t),[e.title])},[]).map(function(t){var r=e.data.find(function(e){return t==e.title&&e.available});return r?r:null}).filter(Boolean),n=r.filter(function(t){return"apparel"==t.category}),o=r.filter(function(t){return"merch"==t.category}),i=r.filter(function(t){return"bundle"==t.category});t.products=[].concat(_toConsumableArray(n),_toConsumableArray(o),_toConsumableArray(i))}),t.goTo=function(t){return e.go("product",{id:t})},window.currentUserOrderInformation&&(window.currentUserOrderInformation.user.nonUSAddress&&(t.nonUSAddress=!0),t.currentUserOrderInformation=window.currentUserOrderInformation,$("#modal1").openModal(),window.currentUserOrderInformation=null)}]),app.service("storeService",["$http",function(t){var e=this;this.products=[],this.getAllProducts=function(){return t.get("/api/products").then(function(t){return e.products=t.data,t})},this.addToCart=function(e,r,n){return t.post("/api/cart",{title:e,size:r,bundle:n})}}]),app.directive("apparelDir",function(){return{templateUrl:"./views/apparelTmpl.html",scope:{add:"&",product:"=",sizes:"="}}}),app.directive("bundleDir",["storeService",function(t){return{templateUrl:"./views/bundleTmpl.html",scope:{add:"&",product:"=",sizes:"="},controller:["$scope",function(e){e.product.options.includes("shirts")&&(e.product.designs=t.products.filter(function(t){return"apparel"==t.category}).map(function(t){return t.title}).filter(function(t,e,r){return r.indexOf(t)==e})),e.product.options.includes("albums")&&(e.product.albums=["Songs of Discontent - cd","War Stories - Album"]),e.$watch("selectedDesign",function(){var r=["small","medium","large","xLarge","xxLarge","xxxLarge"],n=t.products.filter(function(t){return t.title==e.selectedDesign}).filter(function(t){return t.available}).map(function(t){return t.size});e.product.sizes=r.filter(function(t){return n.includes(t)})})}]}}]),app.directive("merchDir",function(){return{templateUrl:"./views/merchTmpl.html",scope:{add:"&",product:"=",sizes:"="}}});